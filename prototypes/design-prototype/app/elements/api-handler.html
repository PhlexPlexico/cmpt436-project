<link rel="import" href="app-imports.html">

<dom-module id="api-handler">
	<style></style>
	<template>
		<iron-ajax id="add_contact_to_group"
		    url="/addgroup"
		    method="POST"
		    handle-as="json"
		    content-type="json"
		    on-response="addContactToGroupResponse"
		    on-error="addContactToGroupError">
    	</iron-ajax>
    	<iron-ajax id="add_group"
		    url="/creategroup"
		    method="POST"
		    handle-as="json"
		    content-type="json"
		    on-response="addGroupResponse"
		    on-error="addGroupError">
    	</iron-ajax>
		<iron-ajax id="add_contact"
		    url="/addcontact"
		    method="POST"
		    handle-as="json"
		    content-type="json"
		    on-response="addContactResponse"
		    on-error="addContactError">
    	</iron-ajax>
	</template>
</dom-module>

<script>
	Polymer({
		is: "api-handler",

		ready: function() {
			this.$.add_contact_to_group.url = "https://" + window.location.host + "/addgroup"
			this.$.add_group.url = "https://" + window.location.host + "/creategroup"
			this.$.add_contact.url = "https://" + window.location.host + "/addcontact"
		},

		addContact: function(contact) {
			console.log("adding contact", contact);
		},

		addContactResponse: function(event) {
			console.log("adding contact response", event);
		},

		addContactError: function(event) {
			console.log("error adding contact", event);
		},

		addGroup: function(group) {
			console.log("adding group", group);
		},

		addGroupResponse: function(event) {
			console.log("adding group response", event);
			if (event.detail.xhr.status != 200) {
				console.log("error adding group");
			}
		},

		addGroupError: function(event) {
			console.log("error adding group", event);
		},

		addContactToGroup: function(group) {
			console.log("adding member to group", group);
		},

		addContactToGroupResponse: function(event) {
			console.log("adding member to group response", event);
			if (event.detail.xhr.status != 200) {
				console.log("error adding contact to group");
			}
		},

		addContactToGroupError: function(event) {
			console.log("error adding contact to group", event);
		},

	});
</script>